{"id":"app/models/Order.model.js","dependencies":[{"name":"C:\\Users\\Rodrigo\\Documents\\GitHub\\Propped-Node-API\\package.json","includedInParent":true,"mtime":1601776173274},{"name":"./db.js","loc":{"line":1,"column":20},"parent":"C:\\Users\\Rodrigo\\Documents\\GitHub\\Propped-Node-API\\app\\models\\Order.model.js","resolved":"C:\\Users\\Rodrigo\\Documents\\GitHub\\Propped-Node-API\\app\\models\\db.js"}],"generated":{"js":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst sql = require(\"./db.js\");\n\nconst Order = function (order) {\n  this.code_order = order.code_order;\n  this.id_user_order = order.id_user_order;\n  this.id_form_of_payment_order = order.id_form_of_payment_order;\n  this.date_order = order.date_order;\n  this.total_order = order.total_order;\n  this.total_of_shipping_order = order.total_of_shipping_order;\n};\n\nOrder.create = (newOrder, result) => {\n  sql.query(`INSERT INTO Order_Propped VALUES('${newOrder.code_order}',${newOrder.id_user_order},${newOrder.id_form_of_payment_order},'${newOrder.date_order}',${newOrder.total_order},${newOrder.total_of_shipping_order})`, (err, res) => {\n    if (err) {\n      result(err, null);\n      return;\n    }\n\n    result(null, _objectSpread({}, newOrder));\n  });\n};\n\nOrder.findByCode = (code, result) => {\n  sql.query(`SELECT * FROM Order_Propped WHERE code_order = '${code}'`, (err, res) => {\n    if (err) {\n      result(err, null);\n      return;\n    }\n\n    if (res.length > 0) {\n      result(null, res);\n      return;\n    }\n\n    result({\n      kind: \"not_found\"\n    }, null);\n    return -1;\n  });\n};\n\nOrder.getAll = result => {\n  sql.query(\"SELECT * FROM Order_Propped\", (err, res) => {\n    if (err) {\n      result(null, err);\n      return;\n    }\n\n    result(null, res);\n  });\n};\n\nOrder.updateByCode = (code, order, result) => {\n  order.code_order = code;\n  sql.query(`UPDATE Order_Propped SET id_user_order = ${order.id_user_order}, id_form_of_payment_order = '${order.id_form_of_payment_order}', date_order = ${order.date_order}, total_order= ${order.total_order}, total_of_shipping_order= '${order.total_of_shipping_order}'  WHERE code_order = '${code}'`, (err, res) => {\n    if (err) {\n      result(null, err);\n      return;\n    }\n\n    if (res.affectedRows == 0) {\n      result({\n        kind: \"not_found\"\n      }, null);\n      return;\n    }\n\n    result(null, _objectSpread({\n      code_order: code\n    }, order));\n  });\n};\n\nOrder.remove = (code, result) => {\n  sql.query(\"DELETE FROM Order_Propped WHERE code_order = '\" + code + \"'\", (err, res) => {\n    if (err) {\n      result(null, err);\n      return;\n    }\n\n    if (res.affectedRows == 0) {\n      result({\n        kind: \"not_found\"\n      }, null);\n      return;\n    }\n\n    result(null, res);\n  });\n};\n\nmodule.exports = Order;"},"sourceMaps":null,"error":null,"hash":"79656e6c00762f481dbf0cee6ec0b3de","cacheData":{"env":{}}}